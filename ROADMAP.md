# 🚀 Backend Roadmap: To KakaoTalk Style

이 문서는 현재의 "Transparent Pipeline" 백엔드를 카카오톡 수준의 기능을 갖춘 시스템으로 확장하기 위한 단계별 계획을 담고 있습니다.

## Phase 1: 안정성 및 관계형 기능 (Stability & Relationships)
현재의 익명 중계를 넘어 서비스 형태의 기틀을 마련합니다.

1. **지속 가능한 세션 관리 (Redis/DB 도입)**:
    - 현재 메모리에만 있는 큐와 그룹 정보를 Redis로 이전하여 서버 재시작 시에도 데이터가 유지되도록 합니다.
2. **신뢰할 수 있는 메시지 전달 (ACK System)**:
    - `delivered`, `seen` 이벤트를 더욱 정교화하여 카카오톡의 '1' 표시(읽음 메시지 수)를 구현합니다.
3. **계정 검색 및 친구 맺기 API**:
    - UUID 기반의 친구 관계를 관리하는 최소한의 메타데이터 레이어를 추가합니다.

## Phase 2: 그룹 채팅 및 미디어 (Group Chat & Media)
1:1 중심에서 다대다 통신으로 확장합니다.

1. **멀티 캐스트 릴레이 (Group Chat)**:
    - 방 번호(Room ID) 기반으로 여러 사용자에게 암호화된 메시지를 동시에 전달하는 로직을 구현합니다.
2. **미디어 브리지 (Media/File Support)**:
    - 대용량 데이터(이미지, 영상)를 위한 임시 스토리지(S3 등) 연동.
    - 클라이언트에서 암호화된 파일을 업로드하고, 서버는 암호화된 채로 전달만 합니다.

## Phase 3: 알림 및 확장성 (Push & Scaling)
사용자가 앱을 닫아도 소통이 끊기지 않게 합니다.

1. **푸시 알림 (FCM/APNs)**:
    - 소켓 연결이 끊긴 사용자에게 푸시 알림을 보내는 워커 프로세스를 추가합니다.
2. **마이크로서비스 아키텍처 (Gateway & Worker)**:
    - 트래픽 증가에 대비해 중계 서버와 관리용 API 서버를 분리합니다.

## 핵심 철학 유지
카카오톡 스타일로 확장하더라도 **"서버는 암호화 키를 가지지 않는다"**는 E2EE 원칙은 고수합니다. 서버는 여전히 암호화된 껍데기만 다루는 "고성능 파이프라인"이어야 합니다.
